# CHAPTER09 최단 경로
> 특점 지점까지 가장 빠르게 도달하는 방법을 찾는 알고리즘

## <1> 가장 빠른 길 찾기
### 가장 빠르게 도달하는 방법
**최단 경로(Shortest Path)** 알고리즘 : 가장 짧은 경로를 찾는 알고리즘
1. 다익스트라 최단 경로 알고리즘
2. 플로이드 워셜
3. 벨만 포드 알고리즘

### 다이스트라 최단 경로 알고리즘
**다이스트라(Dijkstra) 최단 경로 알고리즘** : 여러 개의 노드가 있을때, 특정 노드에서 출발하여 다른 노드로 가는 각각의 최단 경로를 구해주는 알고리즘
- '음의 간선 (0보다 작은 값)' 이 없을 때 정상적으로 동작한다.
- 기본적으로 그리디 알고리즘으로 분류 ➡ 매번 '가장 비용이 적은 노드'를 선택해 임의의 과정 반복
- '각 노드에 대한 현재까지의 최단 거리' 정보를 항상 1차원 리스트에 저장하며 리스트를 계속 갱신한다는 특징

```한 단계당 하나의 노드에 대한 최단 거리를 확실하게 찾는 것으로 이해```

1. 출발 노드를 설정
2. 최단 거리 테이블을 초기화
3. 방문하지 않은 노드 중에서 최단 거리가 가장 짧은 노드를 선택
4. 해당 노드를 거쳐 다른 노드로 가는 비용을 계산하여 최단 거리 테이블 갱신
5. 3~4번 반복

다익스트라 알고리즘을 구현하는 방법
1. 구현하기 쉽지만 느리게 동작하는 코드
2. 구현하기에 조금 더 까다롭지만 빠르게 동작하는 코드

#### 방법1. 간단한 다익스트라 알고리즘
> 9-1.py ➡ 그래프를 표현해야 할 때 많이 사용하는 일단적인 코드 작성법이므로 기억해두기

'최단 거리가 가장 짧은 노드'를 찾기 위해서, 매번 최단 거리 테이블을 선형적으로 (모든 원소를 앞에서부터 하나씩) 탐색

```단계마다 '방문하지 않은 노드 중에서 최단 거리가 가장 짧은 노드를 선택' 하기 위해 매 단계마다 1차원 리스트의 모든 원소를 확인 (순차 탐색)```

#### 방법2. 개선된 다익스트라 알고리즘
> 9-2.py

개선된 다익스트라 알고리즘은 **힙(Heap)** 자료구조 사용
- 특정 노드까지의 최단 거리에 대한 정보를 힙에 담아서 처리하므로 출발 노드로부터 가장 거리가 짧은 노드를 더욱 빠르게 찾을 수 있다.

##### 힙 설명
힙 자료구조는 우선순위 큐를 구현하기 위해 사용하는 자료구조 중 하나
- 스택 : 가장 나중에 삽입된 데이터를 가장 먼저 삭제
- 큐 : 가장 먼저 삽입된 데이터ㅡㄹ 가장 먼저 삭제

**우선순위 큐** 는 ```우선순위가 가장 높은 데이터를 가장 먼저 삭제```

|자료구조|추출되는 데이터|
|--------|---------------|
|스택|가장 나중에 삽입된 데이터|
|큐|가장 먼저 삽입된 데이터|
|우선순위 큐|가장 우선순위가 높은 데이터|

- 데이터를 우선순위에 따라 처리하고 싶을 때 사용
- ```PrioirityQueue``` 또는 ```heapq``` 사용
- 내부적으로 최소 힙 혹은 최대 힙 이용
  - 최소 힙 : 값이 낮은 데이터가 먼저 삭제, 힙에서 원소를 꺼내면 '가장 값이 작은 원소'가 추출됨
  - 최대 힙 : 값이 큰 데이터가 먼저 삭제

``` 현재 가장 가까운 노드를 저장하기 위한 목적으로만 우선순위 큐를 추가로 이용```

9-1.py와 비교했을 때 ```get_smallest_node()```라는 함수를 작성할 필요가 없다는 특징이 있다.

```'최단 거리가 가장 짧은 노드'를 선택하는 과정을 다익스트라 최단 경로 함수 안에서 우선순위 큐를 이용하는 방식으로 대체``` 가능

### 플로이드 워셜 알고리즘
> 9-3.py

**플로이드 워셜 알고리즘 (Floyd-Warashall Algorithm)** : '모든 지점에서 다른 모든 지점까지의 최단 경로를 모두 구해야 하는 경우'
- '거쳐 가는 노드'를 기준으로 알고리즘 수행
- 매번 방문하지 않은 노드 중에서 최단 거리를 갖는 노드를 찾을 필요가 없다는 점이 다익스트라 알고리즘과 다르다.
- '현재 노드를 거쳐 가는' 모든 경로 고려
- 2차원 리스트에 '최단 거리'정보 저장. 모든 노드에 대하여 다른 모든 노드로가는 최단 거리 정보를 담아야 하기 때문

> 다익스트라 알고리즘 : '한 지점에서 다른 특정 지점까지의 최단 경로를 구해야 하는 경우'
> - 최단 거리를 가지는 노드를 하나씩 반복적 선택. 해당 노드를 거쳐 가는 경로를 확인. 최단 거리 테이블을 갱신하는 방식으로 동작
> - 출발 노드가 1개 이므로 다른 모든 노드까지 최단 거리 저장하기 위해 1차원 리스트 이용
  
플로이드 워셜 알고리즘은 **다이나믹 프로그래밍** ↔ 다익스트라 알고리즘은 **그리디 알고리즘**

## <2> 미래도시
> 9-4.py

1번부터 N번까지의 회사존재하며, 특정 회사끼리는 서로 도로를 통해 연결되어 있다. 현재 1번 회사에 위치해 있으며, X번 회사에 방문해 물건을 판매하고자 한다.

1번 회사에서 출발하여 K번 회사를 방문한 뒤 X번 회사로 가는 것이 목표다. 회사 사이를 이동하게 되는 최소 시간을 계산하는 프로그램을 작성

핵심 아이디어 : 1번노드에서 X를 거쳐 K로 가는 최단 거리 (1번 노드에서 X까지의 최단 거리 + X에서 K까지의 최단 거리)

## <3> 전보
> 9-5.py

N개의 도시. X라는 도시에서 Y라는 도시로 전보를 보내려면 통로가 있어야함. 도시 C에서 메시지를 보낼 때, 받게 되는 도시의 총 개수와 걸리는 시간을 계산하는 프로그램 작성

도시의 개수 N, 통로의 개수 M, 메시지를 보내고자 하는 도시 C

통로에 대한 정보 X Y Z. 특정 도시 X에서 다른 특정 도시 Y로 이어지는 통로가 있으며, 메시지가 전달되는 시간이 Z

**문제 해설** 
- 한 도시에서 다른 도시까지의 최단 거리 문제로 치환할 수 있으므로 다익스트라 알고리즘을 이용해 풀 수 있다.
- 또한 N과 M의 범위가 충분히 크기 때문에, 우선순위 큐를 이용하여(heapq) 다익스트라 알고리즘을 작성해야 한다.
